import{_ as l,c as n,o as h,aj as a,j as t,a as s}from"./chunks/framework.DbINzAG1.js";const c=JSON.parse('{"title":"网关支付接口","description":"","frontmatter":{},"headers":[],"relativePath":"multi/gateway/interface/payment/网关支付接口.md","filePath":"multi/gateway/interface/payment/网关支付接口.md","lastUpdated":1744281799000}'),d={name:"multi/gateway/interface/payment/网关支付接口.md"};function e(p,i,k,r,u,o){return h(),n("div",null,i[0]||(i[0]=[a('<h1 id="网关支付接口" tabindex="-1">网关支付接口 <a class="header-anchor" href="#网关支付接口">¶</a></h1><div class="tip custom-block"><p class="custom-block-title">提示</p><p>业务系统通过收银台下单接口创建一个支付链接，链接可以是一个收银台也可以是一个聚合支付的链接，用户访问链接可以完成支付操作。使用该接口可以简化支付接入的流程， 减少开发工作量的同时也可以提高用户体验。</p></div><blockquote><p>同样的商户订单号如果未开始支付时可以重复提交，但重复提交时参数需要与首次下单的数值一致，传输不同的值也不会生效，返回的地址也不会改变。 如果已经进入支付中状态，将不允许重复使用。</p></blockquote><h2 id="接口说明" tabindex="-1">接口说明 <a class="header-anchor" href="#接口说明">¶</a></h2><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>请求URL</td><td><code>/unipay/checkout/create</code></td></tr><tr><td>请求方式</td><td><code>POST</code></td></tr><tr><td>请求类型</td><td><code>application/json</code></td></tr></tbody></table><h2 id="请求参数" tabindex="-1">请求参数 <a class="header-anchor" href="#请求参数">¶</a></h2><h3 id="业务参数" tabindex="-1">业务参数 <a class="header-anchor" href="#业务参数">¶</a></h3><div class="tip custom-block"><p class="custom-block-title">提示</p><p>设置参数时，不要忘了设置公共请求参数<a href="./../overview/调用说明.html">调用说明</a>，未做特殊说明所有接口都需要传输</p></div>',8),t("table",{tabindex:"0"},[t("thead",null,[t("tr",null,[t("th",null,[s("字段名"),t("img",{width:"70/"})]),t("th",null,"变量名"),t("th",null,"必填"),t("th",null,"类型"),t("th",null,"长度"),t("th",null,"示例值"),t("th",null,[s("描述"),t("img",{width:"200/"})])])]),t("tbody",null,[t("tr",null,[t("td",null,"商户订单号"),t("td",null,"bizOrderNo"),t("td",null,"是"),t("td",null,"String"),t("td",null,"100"),t("td",null,"123"),t("td",null,"支付时客户系统传输的业务单号，需要保证唯一，可以为字符文字组合，不要包含特殊符号，订单号不可重复")]),t("tr",null,[t("td",null,"支付标题"),t("td",null,"title"),t("td",null,"是"),t("td",null,"String"),t("td",null,"100"),t("td",null,"测试支付"),t("td")]),t("tr",null,[t("td",null,"支付描述"),t("td",null,"description"),t("td",null,"否"),t("td",null,"String"),t("td",null,"500"),t("td",null,"测试支付的描述"),t("td")]),t("tr",null,[t("td",null,"网关支付类型"),t("td",null,"gatewayPayType"),t("td",null,"是"),t("td",null,"String"),t("td",null,"32"),t("td",null,"h5"),t("td",null,[s("所需要进行网关支付的方式，如PC收银台、H5收银台、聚合支付等，见常量和状态表"),t("a",{href:"/multi/gateway/interface/overview/常量和状态表.html"},"网关支付类型"),s("相关的描述")])]),t("tr",null,[t("td",null,"开启分账"),t("td",null,"allocation"),t("td",null,"否"),t("td",null,"Boolean"),t("td"),t("td",null,"true"),t("td",null,"订单是否允许分账，不传输为不开启")]),t("tr",null,[t("td",null,"开启自动分账"),t("td",null,"autoAllocation"),t("td",null,"否"),t("td",null,"Boolean"),t("td"),t("td",null,"false"),t("td",null,"是否自动对支付订单进行分账，需要开启分账字段为true才会生效")]),t("tr",null,[t("td",null,"过期时间"),t("td",null,"expiredTime"),t("td",null,"否"),t("td",null,"Long"),t("td"),t("td",null,"2024-10-24 12:00:00"),t("td",null,"订单过期时间，格式为yyyy-MM-dd HH:mm:ss，不传输为默认值，默认为当前时间往后加24小时。")]),t("tr",null,[t("td",null,"限制用户支付类型"),t("td",null,"limitPay"),t("td",null,"否"),t("td",null,"String"),t("td",null,"128"),t("td",null,"no_credit"),t("td",null,[s("限制用户支付类型, 目前支持限制信用卡，部分通道才会有效，见常量和状态表"),t("a",{href:"/multi/gateway/interface/overview/常量和状态表.html"},"限制支付类型")])]),t("tr",null,[t("td",null,"支付金额"),t("td",null,"amount"),t("td",null,"是"),t("td",null,"BigDecimal"),t("td",null,"8,2"),t("td",null,"10.12"),t("td",null,[s("要进行支付的金额,单位为"),t("strong",null,"元"),s("，保留两位小数，小数buff末尾不可为0")])]),t("tr",null,[t("td",null,"用户标识"),t("td",null,"openId"),t("td",null,"否"),t("td",null,"String"),t("td",null,"128"),t("td",null,"wxgj22ed144df11"),t("td",null,"主要用于Jsapi、小程序支付等需要用户标识才可以支付的场合")]),t("tr",null,[t("td",null,"付款码"),t("td",null,"authCode"),t("td",null,"否"),t("td",null,"String"),t("td",null,"128"),t("td",null,"6117665200152"),t("td",null,"被扫支付方式所需要传输的参数")]),t("tr",null,[t("td",null,"终端设备编码"),t("td",null,"terminalNo"),t("td",null,"否"),t("td",null,"String"),t("td",null,"128"),t("td",null,"Hvbvdfg"),t("td",null,"使用被扫支付方式，部分通道要求传输扫码终端号，此处的设备为在Daxpay中管理并进行报备的终端")]),t("tr",null,[t("td",null,"附加支付参数"),t("td",null,"extraParam"),t("td",null,"否"),t("td",null,"String"),t("td",null,"2048"),t("td",{"authType:sub":""}),t("td",null,"主要用于传输各通道特有的参数数据")]),t("tr",null,[t("td",null,"商户扩展参数"),t("td",null,"attach"),t("td",null,"否"),t("td",null,"String"),t("td",null,"500"),t("td",null,"id=123332"),t("td",null,"商户扩展参数，回调时会原样返回")]),t("tr",null,[t("td",null,"同步请求地址"),t("td",null,"returnUrl"),t("td",null,"否"),t("td",null,"String"),t("td",null,"200"),t("td",null,[t("a",{href:"http://abc.cn/returnCallback",target:"_blank",rel:"noreferrer"},"http://abc.cn/returnCallback")]),t("td",null,"支付完成后，会自动跳转到设置的页面，部分场景下才会生效")]),t("tr",null,[t("td",null,"异步通知地址"),t("td",null,"notifyUrl"),t("td",null,"否"),t("td",null,"String"),t("td",null,"200"),t("td",null,[t("a",{href:"http://abc.cn/noticeCallback",target:"_blank",rel:"noreferrer"},"http://abc.cn/noticeCallback")]),t("td",null,"异步通知地址，用于商户系统接收回调消息通知")])])],-1),a(`<h2 id="响应结果" tabindex="-1">响应结果 <a class="header-anchor" href="#响应结果">¶</a></h2><h3 id="通用响应参数" tabindex="-1">通用响应参数 <a class="header-anchor" href="#通用响应参数">¶</a></h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>状态码返回0只代表受理业务成功，业务是否成功需要看具体业务的返回信息，不为0表示受理失败，具体响应吗可以参考<a href="./../overview/常量和状态表.html">返回状态码</a></p></div><table tabindex="0"><thead><tr><th>名称<img width="70/"></th><th>字段</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>状态码</td><td>code</td><td>Integer</td><td>0</td><td>默认是0，非0表明请求失败，例如签名错误等</td></tr><tr><td>提示信息</td><td>msg</td><td>String</td><td></td><td>发生错误时会有数据返回</td></tr><tr><td>业务数据</td><td>data</td><td>Json字符串</td><td></td><td>json格式数据，不同的接口返回结构不同，可以参考业务公共响应参数</td></tr><tr><td>签名</td><td>sign</td><td>String</td><td>sIV4zJVhZ4Uz</td><td>返回数据的签名值</td></tr><tr><td>响应时间</td><td>resTime</td><td>String</td><td>2024-08-08 12:12:12</td><td>数据响应的时间, 如果时间与请求时间相差5分钟以上，请排查网络和安全问题</td></tr><tr><td>追踪ID</td><td>traceId</td><td>String</td><td>sIV4zJVhZ4Uz</td><td>用于查询日志排查问题时进行快速定位</td></tr></tbody></table><h3 id="业务响应参数" tabindex="-1">业务响应参数 <a class="header-anchor" href="#业务响应参数">¶</a></h3><div class="tip custom-block"><p class="custom-block-title">提示</p><p>业务数据包裹在<code>公共响应参数</code>中的<code>data</code>字段，在<code>code</code>为<code>0</code>时才会有返回数据。</p></div><table tabindex="0"><thead><tr><th>字段名<img width="70/"></th><th>变量名</th><th>必传</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>网关支付链接</td><td>url</td><td>否</td><td>String</td><td><a href="https://daxpay.cn/gateway/cashier/M1723635576766/M8207639754663343" target="_blank" rel="noreferrer">https://daxpay.cn/gateway/cashier/M1723635576766/M8207639754663343</a></td><td></td></tr><tr><td>收银台发起信息</td><td>payBody</td><td>否</td><td>String</td><td></td><td>暂时未使用</td></tr></tbody></table><h2 id="http请求示例" tabindex="-1">HTTP请求示例 <a class="header-anchor" href="#http请求示例">¶</a></h2><h3 id="请求参数-1" tabindex="-1">请求参数 <a class="header-anchor" href="#请求参数-1">¶</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;bizOrderNo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SDK_1744265454155&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;测试网关支付&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;这是支付备注&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;gatewayPayType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;h5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;allocation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;amount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;attach&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{回调参数}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;returnUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://abc.com/returnurl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;notifyUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://127.0.0.1:10880/test/callback/notify&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mchNo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;M1723635576766&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;appId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;M8207639754663343&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;clientIp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;sign&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eb59486bbf2a4eb9affcf7c11791ad85&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;reqTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-04-10 14:10:54&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="响应参数-成功" tabindex="-1">响应参数(成功) <a class="header-anchor" href="#响应参数-成功">¶</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://daxpay.cn/cashier/DEV_P2025041013564470000005&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;sign&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;15ab925d8720298edc2b6b5475ee173b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;resTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-04-10 13:56:45&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;traceId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3dVxYnUfMkj7&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="响应参数-失败" tabindex="-1">响应参数(失败) <a class="header-anchor" href="#响应参数-失败">¶</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20030</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;暂不支持小程序收银台&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;sign&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;889c3cf302be9c6a1531d97bea459ef2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;resTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-04-10 14:03:16&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;traceId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zCETNESCxgYp&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="sdk请求示例" tabindex="-1">SDK请求示例 <a class="header-anchor" href="#sdk请求示例">¶</a></h2><div class="tip custom-block"><p class="custom-block-title">提示</p><p>使用SDK可以简化接入支付的速度</p></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span></code></pre></div>`,17)]))}const g=l(d,[["render",e]]);export{c as __pageData,g as default};
