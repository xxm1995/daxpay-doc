# 支付订单
::: tip 提示
支付订单是整个支付系统的核心，一切的支付操作都从订单开始，并围绕着订单进行，支持组合支付和简单支付。
:::
## 核心概念

### 异步支付
> 见 [名词解释](/daxpay/guides/overview/名词解释.md) 文档中的说明

### 同步支付
> 见 [名词解释](/daxpay/guides/overview/名词解释.md) 文档中的说明

### 组合支付
> 见 [名词解释](/daxpay/guides/overview/名词解释.md) 文档中的说明
## 操作介绍
> 点击订单条目的操作按钮，可以进行支付同步、关闭、退款操作

| 功能   | 说明                                                                                     |
|------|----------------------------------------------------------------------------------------|
| 支付同步 | 获取第三方支付网关(支付宝、微信等)的订单的信息与本地订单进行对比，如果不一致则变更本地订单的状态，**注意：如果状态是退款类型的，不进行处理，需要通过退款同步进行处理** |
| 关闭   | 如果订单状态为支付中，可以进行关闭订单的操作，会请求第三方支付网关将订单进行关闭                                               |
| 退款   | 订单支付成功或者未全部退款时，可以发起退款请求，能够根据需要选择每个通道退款多少，以及是否进行全部退款                                    |
## 参数介绍
### 支付订单
> 支付订单在系统中不只是一个表，而是由多个表组合而来的，如果想了解到具体的表结构，可以自行查阅源码
 
| 参数     | 功能                                                                                          |
|--------|---------------------------------------------------------------------------------------------|
| 支付ID   | 支付订单的唯一标识，通过支付时系统自动生成的，与外部的各类关联也是通过支付ID进行关联的，如退款、对账、第三方支付网关等                                |
| 业务号    | 发起支付时业务系统传入业务编号，需要保证唯一，用于关联业务系统和支付网关                                                        |
| 网关订单号  | 此处网关指的是第三方支付网关，如支付宝、微信等，订单号是第三方支付网关的订单号，用于关联本系统与三方支付的关系                                     |
| 标题     | 发起支付时订单的名称，会在三方支付网关中显示                                                                      |
| 描述     | 订单的描述信息                                                                                     |
| 金额     | 支付的金额                                                                                       |
| 可退余额   | 当前还剩余多少可以进行退款的余额                                                                            |
| 支付状态   | 当前支付订单的支付状态，如支付中、支付成功、支付失败等，详情可以查看[支付状态](/daxpay/guides/other/常量和状态表.md#支付状态-paystatusenum) |
| 异步支付   | 当前订单是否包含异步支付                                                                                |
| 异步支付方式 | 如果是异步支付的话，异步支付是什么支付通道                                                                       |
| 支付信息   | 分通道的支付信息，如支付宝、钱包每个通道支付了多少                                                                   |
| 可退款信息  | 分通道的可退款金额信息，如支付宝、钱包每个通道还剩余多少可以退款                                                            |
| 客户IP   | 支付时的客户端IP，用于记录支付时的IP                                                                        |
| 错误信息   | 暂时未使用                                                                                       |
| 通知地址   | 支付成功或失败后，会发送通知给业务系统的地址，通知的内容是支付网关的回调通知，具体请参考支付网关的文档                                         |
| 签名类型   | 请求支付网关的签名类型，如MD5、HMAC-SHA256                                                                |
| 签名     | 具体的签名值                                                                                      |
| 商户扩展参数 | 回调时原样返回                                                                                     |
| 请求时间   | 发起支付的时间，由客服系统进行传输，并不是支付网关接收到请求时的时间                                                          |
| 支付时间   | 订单支付完成的时间，同步支付与创建时间一致，包含异步支付时，使用三方支付网关返回的支付时间                                               |
| 过期时间   | 订单的有效时间，超过过期时间的订单，会自动关闭                                                                     |
| 创建时间   | 接收到支付请求进行创建出订单的时间                                                                           |

### 通道支付订单
> 一个支付订单可以包含多个通道支付订单，如支付宝、微信、钱包等，如果非组合支付的订单，支付订单只包含一个通道支付订单。

## 操作界面

| 参数      | 功能                                                                |
|---------|-------------------------------------------------------------------|
| 通道支付单ID | 唯一标识                                                              |
| 支付通道    | 支付使用的通道，见[支付通道](/daxpay/guides/other/常量和状态表.md#支付通道-paychannelenum) |
| 异步支付    | 是否是异步支付通道                                                         |
| 支付方式    | 使用什么方式进行的支付，如扫码支付、付款码支付、WAP支付等                                    |
| 订单金额    | 支付的金额                                                             |
| 支付状态    | 详情可以查看[支付状态](/daxpay/guides/other/常量和状态表.md#支付状态-paystatusenum)  |
| 支付时间    | 订单支付完成的时间，同步支付与创建时间一致，包含异步支付时，使用三方支付网关返回的支付时间                     |
### 订单列表
![微信截图_20240215020604](https://jsd.cdn.zzko.cn/gh/xxm1995/picx-images-hosting@master/daxpay/微信截图_20240215020604.5d7bc6myffw.webp)
### 订单详情
![微信截图_20240215020632](https://jsd.cdn.zzko.cn/gh/xxm1995/picx-images-hosting@master/daxpay/微信截图_20240215020632.41uev4v9qeg0.webp)
### 发起退款
![微信截图_20240216113758](https://jsd.cdn.zzko.cn/gh/xxm1995/picx-images-hosting@master/daxpay/微信截图_20240216113758.5zsc1f5ab4k0.webp)
### 订单操作
![微信截图_20240215020647](https://jsd.cdn.zzko.cn/gh/xxm1995/picx-images-hosting@master/daxpay/微信截图_20240215020647.1mg6xlbtuoio.webp)
### 支付通道订单列表
![微信截图_20240215020706](https://jsd.cdn.zzko.cn/gh/xxm1995/picx-images-hosting@master/daxpay/微信截图_20240215020706.5f67lr36q2c0.webp)
### 支付通道订单详情
![微信截图_20240215020717](https://jsd.cdn.zzko.cn/gh/xxm1995/picx-images-hosting@master/daxpay/微信截图_20240215020717.7axgk5zfo340.webp)
